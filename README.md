## 사용한 언어, 프레임워크, DB, AWS 서비스

- Main Language : Java 17 (LTS)
- Framework : Spring Boot 2.7.0 (LTS)
- Cloud Computer : AWS EC2 t2.micro free tier
- Database : AWS DynamoDB
- View Template : Thymeleaf

<br/>

## 서비스 주소

http://ec2-3-39-177-219.ap-northeast-2.compute.amazonaws.com:8080/

<br/>

## EC2 Setup

(EC2 인스턴스 시작 화면)

Ubuntu 의 t2.micro free tier 로 EC2 인스턴스를 생성했습니다.

(key 생성 화면)

터미널 상에서 인스턴스에 연결할 수 있도록 키 페어도 생성했습니다.

(DynamoDB 연동 작업 1)

DynamoDB와 연결할 수 있도록 IAM Role 을 부여하겠습니다.

(DynamoDB 연동 작업 2)

여기에서 '새 IAM 역할 생성'을 눌러서 진입합니다.

(DynamoDB 연동 작업 3)

'역할 만들기' 버튼을 눌러서 새 역할을 생성해줍니다.

(DynamoDB 연동 작업 4)

EC2 를 위한 Role 로 생성합니다.

(DynamoDB 연동 작업 5)

검색창에 'Dynamo' 를 검색한 뒤 가장 상위의 'AmazonDynamoDBFullAccess' 를 체크해서 부여해줍니다.

이후에는 적절한 이름을 붙여서 생성해주었습니다.

(인스턴스 연결 화면)

인스턴스가 작동 상태에 있는 것을 확인한 후, 위 연결 방법을 통해 연결했습니다.

(git clone)

제가 만든 레포지토리를 clone 받았습니다.

(deploy.sh)

셸 스크립트를 통해서 실행할 수 있도록 deploy 라는 디렉토리를 만들고 `deploy.sh` 파일을 생성했습니다.

(셸 스크립트 실행 명령)

이후에는 셸 스크립트를 실행하는 것으로 간단하게 배포할 수 있게 되었습니다!

<br/>

## REST API 구현

❖ GitBook 을 활용해서 정리해두었습니다!

https://nmin1124.gitbook.io/super-chicken/

<br/>

## Thymeleaf 로 구현한 간단한 화면 렌더링

(기본 화면)

- 이벤트에 유저를 등록할 수 있는 화면
- 이름, 이메일, 전화번호, 개인정보 수집 4가지 값을 받아서 등록  
- 편의상 admin page 로 진입할 수 있도록 링크 생성
  - 실재하는 이벤트 페이지라면 인증과 인가를 구현해서 관리자로 로그인한 경우에만 보일 수 있도록 하게 될 것

(얼럿 창들)

- 등록 성공, 양식 불충분, 이메일 중복까지 3가지 결과가 나타날 수 있음
- 3가지 결과를 얼럿 창을 통해 알려줌

(Admin page)

- 관리자 페이지입니다.  
- 전체 조회, 혹은 국가 코드별 조회 2가지 방식 중에 선택해서 이벤트 등록자들 조

(List page)

- Admin 페이지에서 선택한 조건대로 등록자들 조회
- 수천만명이 접속할 것으로 가정하기 때문에 100개씩 페이징할 수 있도록 구현

<br/>

## About AWS DynamoDB

### 선택 이유

사실 저도 DynamoDB 를 사용해 본 게 처음입니다.  
하지만 과제를 받고, NoSQL 을 활용해서 이를 해결하면 수평적 확장에 유리하겠다는 생각이 들었고, 그래서 조사해본 결과, AWS DynamoDB 를 알게 되었습니다.  
[Amazon DynamoDB 는 어떤 규모에서도 10밀리초 미만의 성능을 제공하는 키-값 및 문서 데이터베이스이며, DynamoDB는 하루에 10조 개 이상의 요청을 처리할 수 있고, 초당 2,000만 개 이상의 피크 요청을 지원할 수 있다](https://aws.amazon.com/ko/dynamodb/) 는 말에, 수천만 건의 데이터를 처리해야 하는 이번 과제에도 적합하다고 생각했습니다.

### free tier 와의 타협

(읽기 용량 단위와 쓰기 용량 단위)

DynamoDB 를 다루기 위해 중요한 부분인 읽기 용량 단위와 쓰기 용량 단위가 있는데, 이 둘은 모두 1로 설정해두었습니다.

(추정 비용)

수천만 데이터를 다루기에 1이라는 단위는 부적합했지만, free tier 와 협상하는 과정에서 어쩔 수 없이 1이라고 설정해두었습니다.  
하지만 만약 실재하는 이벤트라면 AWS 콘솔을 통해 손쉽게 단위를 수정할 수 있음을 확인했습니다.

### TTL 비활성화

(TTL 비활성화)

처음에는 이벤트성 페이지라는 것을 감안하여, 데이터에 TTL 을 적용해서 이벤트가 끝난 시점에는 알아서 삭제되도록 할까도 생각해봤습니다.  
하지만 다시 조사를 해보니 DynamoDB 는 차라리 그때그때 테이블을 삭제하고 생성하는 것이 더욱 편리하며, 또 TTL 을 적용하게 되면 삭제되는 시기가 대개 겹치게 되므로 삭제에 대한 트래픽 급증으로 요금이 크게 부과될 수도 있다고 하여 그만두게 되었습니다.  
대신에 이벤트가 끝나고 스프링 실행을 종료할 때, PreDestroy 로 테이블 자체가 자동 삭제되도록 해두었습니다.
